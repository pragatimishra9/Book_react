{"ast":null,"code":"import _regeneratorRuntime from\"/home/pragatim/code/BookAnAppointment_react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/pragatim/code/BookAnAppointment_react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import Request from'../Actions/Request';import jsPDF from\"jspdf\";import\"jspdf-autotable\";import{config}from'../Services/Constants';export function getFilterData(_x,_x2,_x3){return _getFilterData.apply(this,arguments);}function _getFilterData(){_getFilterData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(currentFilterDate,setDetailedReport,setSummaryReport){var data,body,res,uniqueDates,index,tempReport,_index,total,closed,canceled,index1,temp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data={user:localStorage.getItem('userEmail'),filterDate:currentFilterDate};body=JSON.stringify(data);_context.next=4;return axios.post(Request.filterAppointment,body,config);case 4:res=_context.sent;if(res.data.status===200){setDetailedReport(res.data.appointments);uniqueDates=[];for(index=0;index<res.data.appointments.length;index++){if(uniqueDates.includes(res.data.appointments[index].appointment_date)){}else{uniqueDates.push(res.data.appointments[index].appointment_date);}}tempReport=[];for(_index=0;_index<uniqueDates.length;_index++){total=0;closed=0;canceled=0;for(index1=0;index1<res.data.appointments.length;index1++){if(res.data.appointments[index1].appointment_date===uniqueDates[_index]){total++;if(res.data.appointments[index1].appointment_status===\"Closed\"){closed++;}if(res.data.appointments[index1].appointment_status===\"Canceled\"){canceled++;}}}temp={date:uniqueDates[_index],total:total,closed:closed,canceled:canceled};tempReport.push(temp);}setSummaryReport(tempReport);}else{alert(res.data.error);}case 6:case\"end\":return _context.stop();}},_callee);}));return _getFilterData.apply(this,arguments);}export function generatePDF(detailedReport,summaryReport){var unit=\"pt\";var size=\"A4\";// Use A1, A2, A3 or A4\nvar orientation=\"portrait\";// portrait or landscape\nvar marginLeft=40;var doc=new jsPDF(orientation,unit,size);doc.setFontSize(15);var title=\"Detailed Report\";var headers=[[\"Date\",\"Patient Name\",\"Status\"]];var data=detailedReport.map(function(elt){return[elt.appointment_date,elt.patient_name,elt.appointment_status];});var content={startY:50,head:headers,body:data};doc.text(title,marginLeft,40);doc.autoTable(content);doc.save(\"Detailed_report.pdf\");var doc2=new jsPDF(orientation,unit,size);doc2.setFontSize(15);var stitle=\"Summary Report\";var sheaders=[[\"Date\",\"# Appointments\",\"# Closed\",\"# Canceled\"]];var sdata=summaryReport.map(function(elt){return[elt.date,elt.total,elt.closed,elt.canceled];});var scontent={startY:50,head:sheaders,body:sdata};doc2.text(stitle,marginLeft,40);doc2.autoTable(scontent);doc2.save(\"Summary_report.pdf\");}","map":{"version":3,"names":["axios","Request","jsPDF","config","getFilterData","currentFilterDate","setDetailedReport","setSummaryReport","data","user","localStorage","getItem","filterDate","body","JSON","stringify","post","filterAppointment","res","status","appointments","uniqueDates","index","length","includes","appointment_date","push","tempReport","total","closed","canceled","index1","appointment_status","temp","date","alert","error","generatePDF","detailedReport","summaryReport","unit","size","orientation","marginLeft","doc","setFontSize","title","headers","map","elt","patient_name","content","startY","head","text","autoTable","save","doc2","stitle","sheaders","sdata","scontent"],"sources":["/home/pragatim/code/BookAnAppointment_react/frontend/src/Services/ReportServices.js"],"sourcesContent":["import axios from 'axios';\nimport Request from '../Actions/Request';\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\nimport { config } from '../Services/Constants';\n\nexport async function getFilterData(currentFilterDate, setDetailedReport, setSummaryReport) {\n    const data = {\n        user: localStorage.getItem('userEmail'),\n        filterDate: currentFilterDate\n    }\n    const body = JSON.stringify(data);\n    const res = await axios.post(Request.filterAppointment, body, config);\n    if (res.data.status === 200) {\n        setDetailedReport(res.data.appointments)\n        let uniqueDates = []\n        for (let index = 0; index < res.data.appointments.length; index++) {\n            if (uniqueDates.includes(res.data.appointments[index].appointment_date)) {\n\n            } else {\n                uniqueDates.push(res.data.appointments[index].appointment_date);\n            }\n        }\n        let tempReport = []\n        for (let index = 0; index < uniqueDates.length; index++) {\n            let total = 0;\n            let closed = 0;\n            let canceled = 0;\n            for (let index1 = 0; index1 < res.data.appointments.length; index1++) {\n                if (res.data.appointments[index1].appointment_date === uniqueDates[index]) {\n                    total++;\n                    if (res.data.appointments[index1].appointment_status === \"Closed\") {\n                        closed++;\n                    }\n                    if (res.data.appointments[index1].appointment_status === \"Canceled\") {\n                        canceled++;\n                    }\n\n                }\n            }\n            let temp = {\n                date: uniqueDates[index],\n                total: total,\n                closed: closed,\n                canceled: canceled,\n            }\n            tempReport.push(temp)\n        }\n        setSummaryReport(tempReport);\n    }\n    else {\n        alert(res.data.error);\n    }\n}\n\nexport function generatePDF(detailedReport, summaryReport) {\n    const unit = \"pt\";\n    const size = \"A4\"; // Use A1, A2, A3 or A4\n    const orientation = \"portrait\"; // portrait or landscape\n\n    const marginLeft = 40;\n    const doc = new jsPDF(orientation, unit, size);\n\n    doc.setFontSize(15);\n\n    const title = \"Detailed Report\";\n    const headers = [[\"Date\", \"Patient Name\", \"Status\"]];\n\n    const data = detailedReport.map(elt => [elt.appointment_date, elt.patient_name, elt.appointment_status]);\n\n    let content = {\n        startY: 50,\n        head: headers,\n        body: data\n    };\n\n    doc.text(title, marginLeft, 40);\n    doc.autoTable(content);\n    doc.save(\"Detailed_report.pdf\")\n\n    const doc2 = new jsPDF(orientation, unit, size);\n    doc2.setFontSize(15);\n    const stitle = \"Summary Report\";\n    const sheaders = [[\"Date\", \"# Appointments\", \"# Closed\", \"# Canceled\"]];\n\n    const sdata = summaryReport.map(elt => [elt.date, elt.total, elt.closed, elt.canceled]);\n\n    let scontent = {\n        startY: 50,\n        head: sheaders,\n        body: sdata\n    };\n\n    doc2.text(stitle, marginLeft, 40);\n    doc2.autoTable(scontent);\n    doc2.save(\"Summary_report.pdf\")\n}\n"],"mappings":"oSAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,QAAO,KAAM,oBAAoB,CACxC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAO,iBAAiB,CACxB,OAASC,MAAM,KAAQ,uBAAuB,CAE9C,eAAsBC,cAAa,0DA+ClC,mGA/CM,iBAA6BC,iBAAiB,CAAEC,iBAAiB,CAAEC,gBAAgB,2MAChFC,IAAI,CAAG,CACTC,IAAI,CAAEC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CACvCC,UAAU,CAAEP,iBAChB,CAAC,CACKQ,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC,uBACfR,MAAK,CAACgB,IAAI,CAACf,OAAO,CAACgB,iBAAiB,CAAEJ,IAAI,CAAEV,MAAM,CAAC,QAA/De,GAAG,eACT,GAAIA,GAAG,CAACV,IAAI,CAACW,MAAM,GAAK,GAAG,CAAE,CACzBb,iBAAiB,CAACY,GAAG,CAACV,IAAI,CAACY,YAAY,CAAC,CACpCC,WAAW,CAAG,EAAE,CACpB,IAASC,KAAK,CAAG,CAAC,CAAEA,KAAK,CAAGJ,GAAG,CAACV,IAAI,CAACY,YAAY,CAACG,MAAM,CAAED,KAAK,EAAE,CAAE,CAC/D,GAAID,WAAW,CAACG,QAAQ,CAACN,GAAG,CAACV,IAAI,CAACY,YAAY,CAACE,KAAK,CAAC,CAACG,gBAAgB,CAAC,CAAE,CAEzE,CAAC,IAAM,CACHJ,WAAW,CAACK,IAAI,CAACR,GAAG,CAACV,IAAI,CAACY,YAAY,CAACE,KAAK,CAAC,CAACG,gBAAgB,CAAC,CACnE,CACJ,CACIE,UAAU,CAAG,EAAE,CACnB,IAASL,MAAK,CAAG,CAAC,CAAEA,MAAK,CAAGD,WAAW,CAACE,MAAM,CAAED,MAAK,EAAE,CAAE,CACjDM,KAAK,CAAG,CAAC,CACTC,MAAM,CAAG,CAAC,CACVC,QAAQ,CAAG,CAAC,CAChB,IAASC,MAAM,CAAG,CAAC,CAAEA,MAAM,CAAGb,GAAG,CAACV,IAAI,CAACY,YAAY,CAACG,MAAM,CAAEQ,MAAM,EAAE,CAAE,CAClE,GAAIb,GAAG,CAACV,IAAI,CAACY,YAAY,CAACW,MAAM,CAAC,CAACN,gBAAgB,GAAKJ,WAAW,CAACC,MAAK,CAAC,CAAE,CACvEM,KAAK,EAAE,CACP,GAAIV,GAAG,CAACV,IAAI,CAACY,YAAY,CAACW,MAAM,CAAC,CAACC,kBAAkB,GAAK,QAAQ,CAAE,CAC/DH,MAAM,EAAE,CACZ,CACA,GAAIX,GAAG,CAACV,IAAI,CAACY,YAAY,CAACW,MAAM,CAAC,CAACC,kBAAkB,GAAK,UAAU,CAAE,CACjEF,QAAQ,EAAE,CACd,CAEJ,CACJ,CACIG,IAAI,CAAG,CACPC,IAAI,CAAEb,WAAW,CAACC,MAAK,CAAC,CACxBM,KAAK,CAAEA,KAAK,CACZC,MAAM,CAAEA,MAAM,CACdC,QAAQ,CAAEA,QACd,CAAC,CACDH,UAAU,CAACD,IAAI,CAACO,IAAI,CAAC,CACzB,CACA1B,gBAAgB,CAACoB,UAAU,CAAC,CAChC,CAAC,IACI,CACDQ,KAAK,CAACjB,GAAG,CAACV,IAAI,CAAC4B,KAAK,CAAC,CACzB,CAAC,qDACJ,gDAED,MAAO,SAASC,YAAW,CAACC,cAAc,CAAEC,aAAa,CAAE,CACvD,GAAMC,KAAI,CAAG,IAAI,CACjB,GAAMC,KAAI,CAAG,IAAI,CAAE;AACnB,GAAMC,YAAW,CAAG,UAAU,CAAE;AAEhC,GAAMC,WAAU,CAAG,EAAE,CACrB,GAAMC,IAAG,CAAG,GAAI1C,MAAK,CAACwC,WAAW,CAAEF,IAAI,CAAEC,IAAI,CAAC,CAE9CG,GAAG,CAACC,WAAW,CAAC,EAAE,CAAC,CAEnB,GAAMC,MAAK,CAAG,iBAAiB,CAC/B,GAAMC,QAAO,CAAG,CAAC,CAAC,MAAM,CAAE,cAAc,CAAE,QAAQ,CAAC,CAAC,CAEpD,GAAMvC,KAAI,CAAG8B,cAAc,CAACU,GAAG,CAAC,SAAAC,GAAG,QAAI,CAACA,GAAG,CAACxB,gBAAgB,CAAEwB,GAAG,CAACC,YAAY,CAAED,GAAG,CAACjB,kBAAkB,CAAC,GAAC,CAExG,GAAImB,QAAO,CAAG,CACVC,MAAM,CAAE,EAAE,CACVC,IAAI,CAAEN,OAAO,CACblC,IAAI,CAAEL,IACV,CAAC,CAEDoC,GAAG,CAACU,IAAI,CAACR,KAAK,CAAEH,UAAU,CAAE,EAAE,CAAC,CAC/BC,GAAG,CAACW,SAAS,CAACJ,OAAO,CAAC,CACtBP,GAAG,CAACY,IAAI,CAAC,qBAAqB,CAAC,CAE/B,GAAMC,KAAI,CAAG,GAAIvD,MAAK,CAACwC,WAAW,CAAEF,IAAI,CAAEC,IAAI,CAAC,CAC/CgB,IAAI,CAACZ,WAAW,CAAC,EAAE,CAAC,CACpB,GAAMa,OAAM,CAAG,gBAAgB,CAC/B,GAAMC,SAAQ,CAAG,CAAC,CAAC,MAAM,CAAE,gBAAgB,CAAE,UAAU,CAAE,YAAY,CAAC,CAAC,CAEvE,GAAMC,MAAK,CAAGrB,aAAa,CAACS,GAAG,CAAC,SAAAC,GAAG,QAAI,CAACA,GAAG,CAACf,IAAI,CAAEe,GAAG,CAACrB,KAAK,CAAEqB,GAAG,CAACpB,MAAM,CAAEoB,GAAG,CAACnB,QAAQ,CAAC,GAAC,CAEvF,GAAI+B,SAAQ,CAAG,CACXT,MAAM,CAAE,EAAE,CACVC,IAAI,CAAEM,QAAQ,CACd9C,IAAI,CAAE+C,KACV,CAAC,CAEDH,IAAI,CAACH,IAAI,CAACI,MAAM,CAAEf,UAAU,CAAE,EAAE,CAAC,CACjCc,IAAI,CAACF,SAAS,CAACM,QAAQ,CAAC,CACxBJ,IAAI,CAACD,IAAI,CAAC,oBAAoB,CAAC,CACnC"},"metadata":{},"sourceType":"module","externalDependencies":[]}